(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{14:function(e,t,c){},15:function(e,t,c){},16:function(e,t,c){},18:function(e,t,c){"use strict";c.r(t);var n,o=c(1),l=c.n(o),a=c(7),s=(c(14),c(15),c(16),c(2)),r=c(3),i=c(9);!function(e){e.All="all",e.Completed="completed",e.Active="active"}(n||(n={}));var u=c(0),d=l.a.createContext({todos:[],selectStatus:n.All,filteredTodos:[],addTodos:function(){},setSelectStatus:function(){},changeStatus:function(){},deleteTodo:function(){},changeTitle:function(){},filterTodos:function(){return[]},deletedCompled:function(){},allCompleted:function(){}}),j=function(e){var t=e.children,c=function(e,t){var c=Object(o.useState)((function(){var c=localStorage.getItem(e);return c?JSON.parse(c):t})),n=Object(s.a)(c,2),l=n[0],a=n[1];return Object(o.useEffect)((function(){localStorage.setItem(e,JSON.stringify(l))}),[e,l]),[l,a]}("todos",[]),l=Object(s.a)(c,2),a=l[0],j=l[1],f=Object(o.useState)(n.All),b=Object(s.a)(f,2),O=b[0],m=b[1],p=Object(o.useCallback)((function(e){switch(e){case n.All:return a;case n.Active:return a.filter((function(e){return!e.completed}));case n.Completed:return a.filter((function(e){return e.completed}));default:return a}}),[a]),h=Object(o.useMemo)((function(){return p(O)}),[O,p]);return Object(u.jsx)(d.Provider,{value:{todos:a,addTodos:function(e){var t={id:+new Date,title:e,completed:!1};j([].concat(Object(i.a)(a),[t]))},selectStatus:O,setSelectStatus:m,changeStatus:function(e){j(a.map((function(t){return t.id===e?Object(r.a)(Object(r.a)({},t),{},{completed:!t.completed}):t})))},deleteTodo:function(e){j(a.filter((function(t){return t.id!==e})))},changeTitle:function(e,t){j(a.map((function(c){return c.id===e?Object(r.a)(Object(r.a)({},c),{},{title:t}):c})))},filterTodos:p,deletedCompled:function(){j(a.filter((function(e){return!e.completed})))},filteredTodos:h,allCompleted:function(){var e=a.every((function(e){return e.completed})),t=a.map((function(t){return Object(r.a)(Object(r.a)({},t),{},{completed:!e})}));j(t)}},children:t})},f=function(){var e=Object(o.useState)(""),t=Object(s.a)(e,2),c=t[0],n=t[1],l=Object(o.useContext)(d).addTodos;return Object(u.jsxs)("header",{className:"header",children:[Object(u.jsx)("h1",{children:"Todos"}),Object(u.jsx)("form",{onSubmit:function(e){e.preventDefault(),c.trim()&&(l(c),n(""))},children:Object(u.jsx)("input",{type:"text","data-cy":"createTodo",className:"new-todo",placeholder:"What needs to be done?",value:c,onChange:function(e){n(e.target.value)}})})]})},b=c(8),O=c.n(b),m=function(e){var t=e.todo,c=t.title,n=t.completed,l=t.id,a=Object(o.useContext)(d),r=a.changeStatus,i=a.deleteTodo,j=a.changeTitle,f=Object(o.useState)(c),b=Object(s.a)(f,2),m=b[0],p=b[1],h=Object(o.useState)(null),x=Object(s.a)(h,2),g=x[0],v=x[1],C=Object(o.useState)(g===l),y=Object(s.a)(C,2),S=y[0],N=y[1],k=Object(o.useRef)(null),T=function(){var e=m.trim();e?(p(e),N(!1),j(l,e)):i(l)};return Object(o.useEffect)((function(){g===l&&k.current&&k.current.focus()}),[S,g,l]),Object(o.useEffect)((function(){S||v(null)}),[S]),Object(u.jsx)("li",{className:O()({completed:n,editing:S}),children:S?Object(u.jsx)("input",{type:"text",className:"edit",value:m,onChange:function(e){p(e.target.value)},onKeyUp:function(e){"Enter"===e.key?T():"Escape"===e.key&&(N(!1),p(c),v(null))},onBlur:T,autoFocus:!0}):Object(u.jsxs)("div",{className:"view",children:[Object(u.jsx)("input",{type:"checkbox",className:"toggle",id:"toggle-".concat(l),checked:n,onChange:function(){r(l)}}),Object(u.jsx)("label",{onDoubleClick:function(){N(!0),v(l)},children:c}),Object(u.jsx)("button",{type:"button",className:"destroy","data-cy":"deleteTodo",onClick:function(){i(l)}})]})})},p=function(e){var t=e.todos;return Object(u.jsx)("ul",{className:"todo-list","data-cy":"todosList",children:t.map((function(e){return Object(u.jsx)(m,{todo:e},e.id)}))})},h=function(){var e=Object(o.useContext)(d),t=e.todos,c=e.selectStatus,l=e.setSelectStatus,a=e.deletedCompled,s=Object(o.useMemo)((function(){return t.filter((function(e){return!e.completed})).length}),[t]),r=function(e){return function(){l(e)}};return Object(u.jsx)(u.Fragment,{children:t.length>0&&Object(u.jsxs)("footer",{className:"footer",children:[Object(u.jsx)("span",{className:"todo-count","data-cy":"todosCounter",children:"".concat(s," items left")}),Object(u.jsxs)("ul",{className:"filters",children:[Object(u.jsx)("li",{children:Object(u.jsx)("a",{href:"#/",className:c===n.All?"selected":"",onClick:r(n.All),"data-cy":"todosFilter",children:"All"})}),Object(u.jsx)("li",{children:Object(u.jsx)("a",{href:"#/active",className:c===n.Active?"selected":"",onClick:r(n.Active),"data-cy":"todosFilter",children:"Active"})}),Object(u.jsx)("li",{children:Object(u.jsx)("a",{href:"#/completed",className:c===n.Completed?"selected":"",onClick:r(n.Completed),"data-cy":"todosFilter",children:"Completed"})})]}),s<t.length&&Object(u.jsx)("button",{type:"button",className:"clear-completed",onClick:function(){a()},children:"Clear completed"})]})})},x=function(){var e=Object(o.useContext)(d),t=e.todos,c=e.allCompleted,n=e.filteredTodos;return Object(u.jsxs)("div",{className:"todoapp",children:[Object(u.jsx)(f,{}),Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("section",{className:"main",children:t.length>0&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("input",{type:"checkbox",id:"toggle-all",className:"toggle-all","data-cy":"toggleAll",onClick:c}),Object(u.jsx)("label",{htmlFor:"toggle-all",children:"Mark all as complete"}),Object(u.jsx)(p,{todos:n})]})})}),Object(u.jsx)(h,{})]})},g=document.getElementById("root");Object(a.render)(Object(u.jsx)(j,{children:Object(u.jsx)(x,{})}),g)}},[[18,1,2]]]);
//# sourceMappingURL=main.a89dae17.chunk.js.map